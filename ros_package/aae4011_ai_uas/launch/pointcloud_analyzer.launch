<?xml version="1.0"?>
<!--
AAE4011 - Artificial Intelligence for Unmanned Autonomous Systems
Launch file for Point Cloud Analyzer node + RViz visualization

Usage:
  roslaunch aae4011_ai_uas pointcloud_analyzer.launch
  roslaunch aae4011_ai_uas pointcloud_analyzer.launch pointcloud_topic:=/points_raw
  roslaunch aae4011_ai_uas pointcloud_analyzer.launch pointcloud_topic:=/velodyne_points
  roslaunch aae4011_ai_uas pointcloud_analyzer.launch launch_rviz:=false
-->
<launch>
  <!-- Arguments -->
  <arg name="pointcloud_topic" default="/points_raw" 
       doc="Input point cloud topic (e.g., /points_raw for campus_small_dataset.bag, /velodyne_points, /lidar/points)"/>
  <arg name="window_size" default="10" 
       doc="Number of messages for frequency calculation"/>
  <arg name="launch_rviz" default="true" 
       doc="Launch RViz to visualize LiDAR point cloud (fixed frame: velodyne)"/>
  
  <!-- Point Cloud Analyzer Node -->
  <node name="pointcloud_analyzer" pkg="aae4011_ai_uas" type="pointcloud_analyzer.py" output="screen">
    <param name="pointcloud_topic" value="$(arg pointcloud_topic)"/>
    <param name="window_size" value="$(arg window_size)"/>
  </node>
  
  <!-- RViz: visualize LiDAR point cloud (frame_id: velodyne) -->
  <node if="$(arg launch_rviz)" name="rviz" pkg="rviz" type="rviz" 
        args="-d $(find aae4011_ai_uas)/config/pointcloud_analyzer.rviz" 
        required="false" output="screen"/>
</launch>
